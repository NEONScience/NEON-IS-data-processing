name: "Test Github Auth"
description: "Authenticates to Github and checks out a branch"

inputs:
   region:
     required: false
     default: us-central1
runs:
   using: "composite"
   steps: 
      - id: "auth"
        uses: "google-github-actions/auth@v2"
        with:
            workload_identity_provider: 'projects/991678141243/locations/global/workloadIdentityPools/shared-pool/providers/github-actions-prvdr'
            service_account: 'sa-github-neonscience@neon-shared-service.iam.gserviceaccount.com'

      - name: "Set up Cloud SDK"
        uses: "google-github-actions/setup-gcloud@v2"


      - name: Create branch 
        shell: bash
        run: |
          git config --local user.email "actions@github.com"
          git config --local user.name "gitHub Actions"
          git checkout -b "testing-github-actions"
          git push -u origin "testing-github-actions"
        
