# This example demonstrates the use of a git repo as a hard-wired input artifact.
# The argo repo is cloned to its target destination at '/src' for the main container to consume.
apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: ptb330a-cron-daily-and-date-control-
spec:
  entrypoint: main
  templates:
  - name: main
    volumes:
    - name: workdir
      emptyDir: {}
    containerSet:
      volumeMounts:
      - name: workdir
        mountPath: /data
      containers:
      # All inputs and outputs must occur for the container named 'main'
      - name: main
        image: golang:1.10
        command: [sh, -c]
        args: ["git status && ls && cat README.md"]
        workingDir: /data/site-list
    inputs:
      artifacts:
      - name: site-list
        path: /data/site-list
        git:
          # Check out the main branch of the argo repo and place it at /src
          repo: https://github.com/NEONScience/NEON-IS-data-processing-inputs.git
          # revision can be anything that git checkout accepts: branch, commit, tag, etc.
          revision: "main"
          # For private repositories, create a k8s secret containing the git credentials and
          # reference the secret keys in the secret selectors: usernameSecret, passwordSecret,
          # or sshPrivateKeySecret.
          # NOTE: when authenticating via sshPrivateKeySecret, the repo URL should supplied in its
          # SSH format (e.g. git@github.com:argoproj/argo-workflows.git). Similarly, when authenticating via
          # basic auth, the URL should be in its HTTP form (e.g. https://github.com/argoproj/argo-workflows.git)
          # usernameSecret:
          #   name: github-creds
          #   key: username
          # passwordSecret:
          #   name: github-creds
          #   key: password
          # sshPrivateKeySecret:
          #   name: github-creds
          #   key: ssh-private-key
          # 
          # insecureIgnoreHostKey disables SSH strict host key checking during the git clone
          # NOTE: this is unnecessary for the well-known public SSH keys from the major git
          # providers (github, bitbucket, gitlab, azure) as these keys are already baked into
          # the executor image which performs the clone.
          # insecureIgnoreHostKey: true
          #
          # Shallow clones/fetches can be performed by providing a `depth`.
          # depth: 1
          #
          # Additional ref specs to fetch down prior to checkout can be
          # provided with `fetch`. This may be necessary if `revision` is a
          # non-branch/-tag ref and thus not covered by git's default fetch.
          # See https://git-scm.com/book/en/v2/Git-Internals-The-Refspec for
          # the refspec format.
          # fetch: refs/meta/*
          # fetch: refs/changes/*
          #
          # Single branch mode can be specified by providing a `singleBranch` and `branch` This mode 
          # is faster than passing in a revision, as it will only fetch the references to the given branch.
          # singleBranch: true
          # branch: my-branch
